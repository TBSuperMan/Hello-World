# maven

## maven是啥

Maven 主要服务于基于 Java 平台的项目构建、依赖管理和项目信息管理。

Maven 的主要功能主要分为 4 点：

- 依赖管理系统
- 多模块构建
- 一致的项目结构
- 一致的构建模型和插件机制

## Maven有啥优点和缺点

**优点**
- 简化了项目依赖管理。
- 便于与持续集成工具(Jenkins)整合、
- 便于项目升级，无论是项目本身升级还是项目使用的依赖升级
- 有助于多模块项目的开发，一个模块开发好后，发布到仓库，依赖该模块时可以直接从仓库更新，而不用自己去编译。

**缺点**
- Maven 采用约定优于配置的策略(convention over configuration)，虽然上手容易，但是一旦出了问题，难于调试

## 项目为什么要选择maven构建

在项目过程中，需要用到大量第三方包，如果没有构建工具，就需要手动把他们下载下来，并加入到工程的依赖中，非常痛苦。
而且如果包的版本对不上，就会出现奇怪的问题，也不利于后续的工作。

## maven坐标的含义

- groupID：定义当前 Maven 项目隶属的实际项目。且不应对应项目隶属的组或公司
- artifactID：该元素定义当前实际项目中的一个 Maven 项目(模块)。通常以实际项目名称作为artifactId的前缀
- version：包的版本
- packaging ：Maven项目打包的方式

## maven依赖策略

1. 依赖路径最短优先原则
   - 一个项目Demo依赖了两个jar包，其中有`A-B-C-X(1.0)`与`A-D-X(2.0)`这两个依赖路径，由于`A-D-X(2.0)`路径短，maven将其优先
2. pom文件申明顺序优先
   - 如果两条依赖路径的长度相同，则根据pom文件中申明的顺序加载 
3. 覆写优先
   - 子pom申明的依赖优先于父pom 

## maven生命周期

## maven怎么解决循环依赖

循环依赖即A依赖于B，B依赖于C，C又依赖于A，或者A与B互相依赖的情况

build-helper-maven-plugin解​决​相​互​依​赖​的​问​题。​先​把​相​互​依​赖​的​模​块​整​合​在​一​起​，相​当​于​把​这​些​模​块​合​并​成​一​个​单​独​的​模​块​统​一​编​译​， 如​下​图​：合​并​A、​B、​C三个模块为D模块

![](./../images/spring/循环依赖.png)

这个模块D相当于我们工程里的父工程parent。我​们​把​它​当​做​一​个​辅​助​构​建​模​块​，然​后​让​A、​B、​C模​块​都​依​赖​于​D模​块​，这​样​的​话​就​可​以​成​功​编​译​A、​B和​C模​块​

