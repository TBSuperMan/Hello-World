# 场景题

针对一个api限流，每个用户1小时只能访问1000次。（本人过程很煎熬，实在是考虑的不周全，每次都被找到漏洞）

设计一个多线程环境的生产者消费者处理数据流，数据流包括学生成绩信息{张三，数学，100}，{李四，语文，90}...。消费者消费时提供消费时刻的平均分数，消费时刻top3成绩学生的姓名和分数。
要求考虑数据量大的情况，数据量<= Long.MAX_VALUE / 100

有很多图片，然后我们需要对图片进行存储，以及查找，有什么数据结构比较适合？

如果要利用Redis实现分布式锁的令牌环，应该使用哪种数据结构，怎么设计

微信朋友圈怎么建表，关系如何

如果表项非常大，怎么更改表

设计一个消息系统？保证其高可用，高可靠等？同时考虑一下衡量消息系统的性能指标？

两个MQ A,B用来将消息发送给接收方？要求发送消息的时间额小于5ms(大概这个值)？作为中间程序应该怎么做？考虑使用所有现存的中间件？

假设上游的 QPS 1000，中间有 10 个节点对上游的请求上送给下游进行处理（类似网关），下游 QPS 500，问，中间这 10 个节点如何做限流，能保证下游负载能力最大化。（这 10 个节点的负载可能会动态变化）

海量数据存储数据库的扩展问题

有一个接口要查询数据库当中三张表，假设有十万个数据要查询，速度特别慢，用户容忍不了，你怎么解决

设计一张数据表，以及对应的SQL DDL语句，可以实现文件DDL操作（查询、删除、修改、移动）JAVA实现方法，涉及到SQL查询用方法名代替，实现查询一个文件的整个路径并输出（优化代码）

怎么防止多个人同时更改商品信息时，第二个人把第一个人的信息给覆盖掉（我说的是类似简历版本号机制，修改前读取一个版本号，然后提交时再读取一下版本号与之前读的一样不一样）

PC端和手机端，手机扫PC端浏览器的二维码进行登录，手机上用户已经登录，点击确定， 浏览器上完成登录。具体到用什么技术点。
接上题，为什么要用AJAX，不能用长连接的方式吗？

实现一个微博点赞的设计，数据如何储存